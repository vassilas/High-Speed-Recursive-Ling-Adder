\section{Παραγοντοποίηση Jackson}
\label{section:jackson}
Στο παρόν κεφάλαιο θα παρουσιαστεί μια επιπλέον μέθοδος παραγοντοποίησης 
για τον υπολογισμό του κρατουμένου , η οποία προτάθηκε από τους Jackson και 
Tawlar \cite{1399373}. Με την συγκεκριμένη τεχνική δεν μειώνεται μόνο
η πολυπλοκότητα του πρώτου επιπέδου των αθροιστών, αλλά είναι δυνατό να εφαρμοστεί σε όλα τα επίπεδα.
Ουσιαστικά στο κεφάλαιο αυτό συστήνεται η γενίκευση της 
παραγοντοποίησης που προτάθηκε από τον Ling.

Στις παρακάτω εξισώσεις παραγοντοποιείται η εξίσωση υπολογισμού κρατουμένου.
Η πρώτη παραγοντοποίηση αναλύθηκε στην ενότητα \ref{section:Ling},
ενώ οι επόμενες δύο επιφέρουν επιπλέον παραγοντοποίηση της αρχικής συνάρτησης. 
\begin{equation}
\begin{split}
    G_{4:0} &= g_4 + p_4    g_3 + p_4p_3g_2 + p_4p_3p_2g_1 + p_4p_3p_2p_1g_0 \\
            &= \Big[p_4\Big]\Big[g_4 + g_3 +p_3g_2 + p_3p_2g_1 + p_3p_2p_1g_0\Big] \\
            &=\Big[g_4 + p_4p_3\Big]\Big[g_4 + g_3 + g_2 + p_2g_1 + p_2p_1g_0\Big] \\
            &= \Big[g_4 +  p_4g_3 + p_4p_3p_2 \Big]\Big[ g_4 + g_3 + g_2 + g_1 + p_1g_0 \Big]
\end{split}
\label{jacskon_basic_eq_idea}
\end{equation}

Στην συνέχεια θα εκφραστεί μια γενικευμένη μορφή για αυτές τις παραγοντοποιήσεις και επιπλέον
θα υποδειχθούν τεχνικές μείωσης πολυπλοκότητας και στα επιμέρους τμήματα
της παραπάνω εξίσωσης (μέσα στις αγκύλες). Η παραγοντοποίηση αυτή καλείται Jackson.






\subsection{Βασικοί Όροι}


Αρχικά ο Jackson ορίζει δυο βοηθητικά σήματα, τα D και B,
όπου το σήμα $D_{i:j}$ είναι αληθές όταν η ομάδα δυαδικών ψηφίων των 
σημάτων εισόδου από τα ψηφία $a_i,b_i$ έως τα $a_j,b_j$ παράγουν κρατούμενο
εξόδου ή διαδίδουν το κρατούμενο εισόδου, δηλαδή,
\begin{equation}
\begin{split}
    D_{j:k} &= G_{j:k} + P_{j:k}\\
            &= G_{j:k+1} + P_{j:k}
\end{split}
\end{equation}
ενώ το σήμα $B_{i:j}$ αληθεύει όταν 
έστω ένα ζευγάρι $(a_k,b_k)$ παράγει κρατούμενο, με $i \leq k \leq j$
\begin{equation}
\begin{split}
    B_{i:j} = g_i + g_{i-1} + ... + g_j
\end{split}
\end{equation}

Γνωρίζοντας τα παραπάνω σήματα είναι δυνατό να εκφραστεί πλέον η βασική 
παραγοντοποίηση του υπολογισμού του κρατουμένου εξόδου
που συστήνεται από τον Jackson. Ουσιαστικά επαναδιατυπώνεται η εξίσωση \ref{jacskon_basic_eq_idea} με διαφορετική μορφή, χρησιμοποιώντας τα σήματα που παρουσιάστηκαν. 

\begin{equation}
    G_{j:i} = D_{j:k} \Big[B_{j:k}+G_{k-1:i}\Big]
\end{equation}

Από την παραπάνω εξίσωση το τμήμα μέσα στις αγκύλες ορίζεται ως $R$ και παρακάτω παρουσιάζονται τρείς διαφορετικές εκφράσεις της ίδιας συνάρτησης R. 
\begin{equation}
\begin{split}
    R^{j-k+1}_{j:i} &= B_{j:k}+G_{k-1:i}\\
    R^{n-m}_{n-1:j} &= B_{n-1:m} + G_{m-1:j}\\
    R^p_{i:j} &= B_{i:i-p+1}+G_{i-p:j}  
\end{split}
\end{equation}
οπού η υπογεγραμμένη αναφέρεται στην ομάδα των
δυαδικών ψηφίων εισόδου και το υπερκείμενο στο πλήθος των ψηφίων
που δέχεται σαν είσοδο το σήμα $B$. Η εξίσωση του κρατουμένου ομάδας λαμβάνει την τελική της έκφραση
\begin{equation}
    G_{j:i} = D_{j:k} R^{j-k+1}_{j:i}
\end{equation}

Πρέπει να σημειωθεί πως στην περίπτωση που $j=k$, στην παραπάνω σχέση, 
τότε εφαρμόζεται μία υποκατηγορία των Jackson συναρτήσεων που αφορά την παραγοντοποίηση που παρουσιάστηκε στο προηγούμενο κεφάλαιο όπως είχε οριστεί από τον Ling.

Το τελικό άθροισμα υπολογίζεται παρόμοια με τον Ling
\begin{equation}
    \label{Jackson_sum_mult}
    \begin{split}
        sum_i &= x_i \oplus G_{i:0}\\
        sum_i &= R ? ( x \oplus D) : x 
    \end{split}
\end{equation}












\subsection{Αναδρομή του Jackson }

Βασικό πλεονέκτημα των αθροιστών προθέματος είναι η αναδρομή, όπου όπως 
έχει προαναφερθεί το κρατούμενο εξόδου μίας ομάδας δυαδικών ψηφίων μπορεί
να παραχθεί υπολογίζοντας επιμέρους υποομάδες αυτού του συνόλου.
Παρακάτω θα αποδειχθεί πως και το σήμα R που ορίστηκε έχει 
επίσης αυτή την ιδιότητα.

Θα κατασκευαστεί το σήμα $R_{n-1:0}$ με είσοδο n δυαδικά ψηφία συνδυάζοντας
υποομάδες αυτού του συνόλου χωρίζοντάς το σε τρία, ίσου μεγέθους διαμερίσματα, τις υποομάδες bits εισόδου $n-1:k , k-1:j$ και $j-1:0$. Επίσης επιλέγονται τα m και v ως τα μεσαία στοιχεία των δύο τελευταίων διαστημάτων.
 

Αρχίζοντας με την εξίσωση του R %που θέλουμε να παράξουμε 
\begin{equation*}
    R^{n-m}_{n-1:0} = B_{n-1:m} + G_{m-1:0}
\end{equation*}

και χρησιμοποιώντας την εξίσωση αναδρομής του G, αναγράφεται.

\begin{equation*}
    R^{n-m}_{n-1:0} = B_{n-1:m} + G_{m-1:j} + P_{m-1:j}G_{j-1:0}
\end{equation*}

Επίσης, διασπώντας το B σε δυο σήματα, γράφεται υπό την μορφή

\begin{equation*}
    R^{n-m}_{n-1:0} = [ B_{n-1:k} ] + [ B_{k-1:m} + G_{m-1:j} ] + P_{m-1:j}G_{j-1:0}
\end{equation*}

Ήδη οι πρώτοι δυο όροι που έχουν εμφανιστεί μέσα στις αγκύλες σχηματίζουν τα 
σήματα R από υποομάδες, κατασκευάζοντας και τον τελευταίο όρο, εφαρμόζοντας την
εξίσωση του G που διατυπώθηκε παραπάνω, η εξίσωση μετασχηματίζεται σε

\begin{equation*}
    R^{n-m}_{n-1:0} = [ B_{n-1:k} ] + [ B_{k-1:m} + G_{m-1:j} ] + [ P_{m-1:j}D_{j-1:v} ][B_{j-1:v}+G_{v-1:0}]
\end{equation*}

Οπότε η τελική εξίσωση είναι 

\begin{equation}
    R^{n-m}_{n-1:0} = R^{n-k}_{n-1:k} + R^{k-m}_{k-1:j} + [ P_{m-1:j}D_{j-1:v} ]R^{j-v}_{j-1:0}
\end{equation}

Για περισσότερη ευκολία στις παρακάτω εξισώσεις ορίζεται και το σήμα Q 
το οποίο είναι το σήμα μέσα στις αγκύλες στην παραπάνω εξίσωση  

\begin{equation}
    Q^{n-m}_{n-1:k} = P_{n-1:m}D_{m-1:k}
\end{equation}

Μέχρι στιγμής έχει αποδειχθεί πως το σήμα R ενός συνόλου δυαδικών ψηφίων
μπορεί να υπολογιστεί από τα σήματα R μικρότερων υποομάδων. Πρέπει
να τονιστεί πως υπάρχουν πολλοί διαφορετικοί συνδυασμοί και τύποι, που υλοποιούν 
τον αναδρομικό υπολογισμό, οι οποίοι θα παρουσιαστούν στην συνέχεια. 
Παρακάτω θα αποδειχθεί πως και το σήμα Q υπολογίζεται αναδρομικά, αφού πρώτα αποτυπωθεί ο 
αναδρομικός υπολογισμός του σήματος D με τους παρακάτω δύο τύπους 
\begin{equation}
\begin{split}
    D_{j:i} &= D_{j:k}[ B_{j:k} + D_{k-1:i} ] \\
    D_{j:i} &= G_{j:k} + P_{j:k}D_{k-1:i}
\end{split}
\end{equation}

Με την ίδια λογική που ακολουθήθηκε προηγουμένως θα αποδειχθεί πώς υπολογίζεται 
αναδρομικά το σήμα Q με είσοδο το σύνολο των bits $n-1:0$.
Το αρχικό σύνολο διασπάται σε τρία διαμερίσματα $n-1:k , k-1:j$ και $j-1:0$, ομοίως επιλέγονται
τα μεσαία στοιχεία των τελευταίων δύο υποομάδων m και v αντίστοιχα. Ξεκινώντας από την
εξίσωση του σήματος Q που εκφράστηκε παραπάνω, αρχικά γίνεται χρήση της 
πρώτης εξίσωσης από τις παραπάνω δυο αναδρομικές συναρτήσεις του D, ενώ παράλληλα
διασπάται το σήμα P, και γράφεται 
\begin{equation*}
\begin{split}
    Q^{n-m}_{n-1:0} &= P_{n-1:m}D_{m-1:0}\\
    Q^{n-m}_{n-1:0} &= P_{n-1:m}D_{m-1:j}[B_{m-1:j}+D_{j-1:0}] \\
    Q^{n-m}_{n-1:0} &= P_{n-1:k}[P_{k-1:m}D_{m-1:j}][B_{m-1:j}+D_{j-1:0}]
\end{split}
\end{equation*}
Σε αυτό το σημείο μέσα στις δύο πρώτες αγκύλες έχουν ήδη χτιστεί τα Q σήματα
των πρώτων δύο υποσυνόλων, για την παραγωγή και του τρίτου στην τελευταία αγκύλη
θα γίνει χρήση της δεύτερης εξίσωσης από τις δυο αναδρομικές συναρτήσεις του D
\begin{equation*}
    Q^{n-m}_{n-1:0} = P_{n-1:k}[P_{k-1:m}D_{m-1:j}][B_{m-1:j}+G_{j-1:v}+P_{j-1:v}D_{v-1:0}]
\end{equation*}
Αντικαθιστώντας στην παραπάνω εξίσωση τα αντίστοιχα σήματα R και Q παρουσιάζεται η τελική 
μορφή της αναδρομικής συνάρτησης 
\begin{equation}
    Q^{n-m}_{n-1:0} = Q^{n-k}_{n-1:k}Q^{k-m}_{k-1:j}[R^{m-j}_{m-1:v}+Q^{j-v}_{j-1:0}]
\end{equation}








\subsection{Εφαρμογές της αναδρομής}
Όπως προαναφέρθηκε παραπάνω υπάρχουν διάφορες υλοποιήσεις της αναδρομής ακόμα και με 
ίδιο αριθμό υποομάδων \cite{5470204} σε αντίθεση με τις απλές αναδρομές των αθροιστών προθέματος.
Παρακάτω θα παρουσιαστούν όλες οι πιθανές μορφές των σημάτων R και Q με πλήθος υποομάδων
δύο ή Radix-2 (σθένος-2) και τέσσερα ή Radix-4 (σθένος-4). Υπάρχουν προφανώς και αντίστοιχες συναρτήσεις και για τρεις, πέντε και ούτω καθεξής,
αλλά θα διατυπωθούν επιλεγμένα αυτά τα δύο σύνολα γιατί θα χρησιμοποιηθούν σε επόμενες ενότητες.
\\\\
Λογικές συναρτήσεις Radix-2:
\begin{equation}
    \begin{split}
        R^m_{i:0} =& R^m_{i:j+1} + Q^{i-m-j}_{i-m:j+1-m}*R^{m}_{j:0}\\
        R^{i-j+m}_{i:0} =& R^m_{i:j+1} + R^{m}_{j:0}
    \end{split}
\end{equation}
\begin{equation}
    \begin{split}
        Q^m_{i:0} =& Q^m_{i:j+1} * ( R^{i-m-j}_{i-m:j+1-m} + Q^m_{j:0} )\\
        Q^{i-j+m} =& Q^m_{i:j+1} * Q^m_{j:0}
    \end{split}
\end{equation}
\\
Λογικές συναρτήσεις Radix-4:
\begin{equation}
    \begin{split}
        R^m_{i:0} =& R^m_{i:j+1} + Q^{i-m-j}_{i-m:j+1-m}R^m_{j:k+1} +\\
                   & Q^{i-m-j}_{i-m:j+1-m}Q^{j-m-k}_{j-m:k+1-m}R^m_{k:l+1}\\
                   & Q^{i-m-j}_{i-m:j+1-m}Q^{j-m-k}_{j-m:k+1-m}Q^{k-m-l}_{k-m:l+1-m}R^m_{l:0}\\
        R^{i-j+m}_{i:0} =& R^m_{i:j+1} + R^m_{j:k+1} + Q^{j-m-k}_{j-m:k+1-m}R^m_{k:l+1}\\
                         & Q^{j-m-k}_{j-m:k+1-m}Q^{k-m-l}_{k-m:l+1-m}R^m_{l:0}\\
        R^{i-k+m}_{i:0} =& R^m_{i:j+1} + R^m_{j:k+1} + R^m_{k:l+1} + Q^{k-m-l}_{k-m:l+1-m}R^m_{l:0}\\
        R^{i-l+m}_{i:0} =& R^m_{i:j+1} + R^m_{j:k+1} + R^m_{k:l+1} + R^m_{l:0}
    \end{split}
\end{equation}
\begin{equation}
    \begin{split}
        Q^m_{i:0} =& Q^m_{i:j+1}( R^{i-m-j}_{i-m:j+1-m} + Q^m_{j:k+1}( R^{j-m-k}_{j-m:k+1-m} +\\
                   & Q^m_{k:l+1}( R^{k-m-l}_{k-m:l+1-m} + Q^m_{l:0} )))\\
        Q^{i-j+m}_{i:0} =& Q^m_{i:j+1}Q^m_{j:k+1}( R^{j-m-k}_{j-m:k+1-m} +\\
                         & Q^m_{k:l+1}( R^{k-m-l}_{k-m:l+1-m} + Q^m_{l:0} ))\\
        Q^{i-k+m}_{i:0} =& Q^m_{i:j+1}Q^m_{j:k+1}Q^m_{k:l+1}( R^{k-m-l}_{k-m:l+1-m} + Q^m_{l:0} )\\
        Q^{i-l+m}_{i:0} =& Q^m_{i:j+1}Q^m_{j:k+1}Q^m_{k:l+1}Q^m_{l:0}
    \end{split}
\end{equation}
Παρατηρείται πως στην περίπτωση των Radix-2 δεν υπάρχει διαφορά σε σχέση με τις αντίστοιχες συναρτήσεις
Prefix και Ling. Η χρονική καθυστέρηση και στις δύο περιπτώσεις είναι ίδια, εκτός των συναρτήσεων του πρώτου επιπέδου όπου ο Ling και ο Jackson υπερτερούν. Επίσης, παρατηρείται πως όταν απλοποιείται η υλοποίηση του σήματος R τότε αυξάνεται η πολυπλοκότητα της υλοποίησης του Q.












\subsection{Πρακτικές εφαρμογές}
\label{subsection:Jackson_Implementations}
Στην προηγούμενη παράγραφο παρουσιάστηκε ένα μεγάλο πλήθος επιτρεπτών υλοποιήσεων για
τον αναδρομικό υπολογισμό των σημάτων R και Q. Ασχέτως όμως αν όλες αυτές οι συναρτήσεις 
παράγουν σωστό αποτέλεσμα, το κύριο ζητούμενο είναι η απόδοση. Ένα πιθανό σενάριο 
είναι η δοκιμή κάθε συνδυασμού των παραπάνω συναρτήσεων και συγκρίνοντας τα τελικά αποτελέσματα, 
λαμβάνοντας ως παράγοντες σύγκρισης την καθυστέρηση, το εμβαδόν και την κατανάλωση, να
χρησιμοποιείται ο κατάλληλος για την εφαρμογή αθροιστής. Αυτή η τεχνική είναι αρκετά χρονοβόρα 
και πολύπλοκη, οι συνδυασμοί είναι πολλοί και τριπλασιάζονται εάν συμπεριληφθούν και 
περιπτώσεις αραιών υλοποιήσεων ( Ενότητα \ref{Jackson_sparse} ).

Το κλειδί στον αποδοτικό σχεδιασμό αναδρομικών Ling αθροιστών βρίσκετε στην σωστή
ισορροπία πολυπλοκότητας μεταξύ των σημάτων R, D και Q. Στην παραγοντοποίηση του
Ling αφαιρείται ένας propagate p παράγοντας από την πολυπλοκότητα του κρατουμένου 
και στο τελευταίο στάδιο συνυπολογίζεται. Αντίστοιχα, στις περιπτώσεις των αθροιστών 
Jackson, που στην ουσία είναι μια γενικευμένη έκφραση του Ling, αφαιρούνται n propagate
σήματα τα οποία μειώνουν την πολυπλοκότητα του σήματος R που ελέγχει τον πολυπλέκτη 
του τελευταίου σταδίου, αντίστοιχο του H στον Ling, άλλα επιβαρύνεται το σήμα D. 

Γνωρίζοντας πως το σήμα D εισάγεται μαζί με το x σε πύλη XOR πριν τον πολυπλέκτη όπως φαίνεται και στην εξίσωση \ref{Jackson_sum_mult}, το D πρέπει να έχει την τελική του τιμή τουλάχιστον δυο FO4 
\footnote{FO4 : Fan-out of n (FOn) είναι μια μετρική καθυστέρησης πύλης που χρησιμοποιείται στα ψηφιακά CMOS τεχνολογίας. Στην περίπτωση του FO4 η καθυστέρηση αντιστοιχεί σε αυτή της πύλης XOR} πριν από το σήμα R. 

Στον παρακάτω πίνακα \ref{table:Prefix_Jackson_Comparison}  
συγκρίνονται οι συναρτήσεις ενός απλού παράλληλου προθεματικού αθροιστή και ενός Jackson.
\begin{table}[H]
\centering
     \begin{tabular}{|| c | c | c ||} 
        \hline
         Radix & Parallel Prefix & Jackson \\
        \hline\hline
        3  
        & 
        \begin{tabular}{@{}c@{}}$G_2 + P_2G_1 + P_2P_1G_0$\\$P_2P_1P_0$\end{tabular}
        &
        \begin{tabular}{@{}c@{}}$R_2 + R_1 + Q_1R_0$\\$Q_2Q_1[R_0+Q_0]$\end{tabular}

        \\ 
        \hline
        4  
        & 
        \begin{tabular}{@{}c@{}}$G_3 + P_3G_2 + P_3P_2G_1 + P_3P_2P_1G_0$\\$P_3P_2P_1P_0$\end{tabular}
        &
        \begin{tabular}{@{}c@{}}$R_3+R_2+Q_2R_1+Q_2Q_1R_0$\\$Q_3Q_2Q_1[R_0+Q_0]$\end{tabular}
        \\
        \hline

    \end{tabular}
\caption{Σύγκριση προθεματικού αθροιστή Jackson}
\label{table:Prefix_Jackson_Comparison}
\end{table}
Είναι εμφανές το ζύγισμα που αναφέρθηκε. Όσο απλοποιείται το σήμα R (η πάνω εξίσωση
σε κάθε κελί του πίνακα στην στήλη των Jackson συναρτήσεων) τόσο πιο περίπλοκο
γίνεται το σήμα Q (η κάτω εξίσωση). Επίσης παρατηρείται στην γραμμή Radix-4 πως ενώ
ο Q παράγοντας είναι πιο περίπλοκος από τον P, o όρος R εξισώνει αυτή την διαφορά
και στις περισσότερες περιπτώσεις συνολικά είναι πιο αποδοτική η υλοποίηση
κατά Jackson.

% \\\\\\
% \textcolor{red}{
Παρακάτω δίνεται ένας αρχικός προσανατολισμός σε μορφή κανόνων  σχεδίασης των 
αθροιστών Jackson, χωρίς όμως την εγγύηση του αποδοτικότερου αποτελέσματος. 
Ανάλογα την εφαρμογή και τους πόρους είναι πιθανό να παραβιαστούν με σκοπό το καλύτερο 
δυνατό αποτέλεσμα. Οι κανόνες αυτοί προτείνουν :
\begin{enumerate}
    \item Όπως προαναφέρθηκε, η κατασκευή του όρου D πρέπει να υλοποιείται τουλάχιστον δυο με τρία FO4 επίπεδα από τον αντίστοιχο όρο R.
    \item Δεν πρέπει να αφαιρείται κανένας propagate p όρος μέσω της παραγοντοποίησης του τελευταίου
    σταδίου. Ο λόγος για τον ισχυρισμό αυτό είναι απόρροια της παραπάνω ζύγισης.
    \item Στο πρώτο επίπεδο προτείνεται η Ling παραγοντοποίηση, δηλαδή η αφαίρεση ενός 
    propagate. Αυτή η πρόταση αφορά την ποικιλία των CMOS κελιών που
    παρέχονται από τις βιβλιοθήκες των κατασκευαστών. Με Ling παραγοντοποίηση στην πρώτη 
    βαθμίδα δίνεται το προνόμιο χρήσης ενός μόνο κελιού το οποίο στις περισσότερες βιβλιοθήκες
    συμπεριλαμβάνεται (AOI και ΟΑΙ\footnote{AND-OR-INVERTER και OR-AND-INVERTER}).
    \item Οι όροι D μπορούν να κατασκευαστούν από R και Q, οπότε είναι προτιμότερο, όσον αφορά
    το εμβαδόν, τα σήματα D να οδηγούνται από ήδη υπάρχοντα σήματα R και Q.
\end{enumerate}
% }
% \\\\\\






















% \subsection{Παράδειγμα υλοποίησης}

% Με σκοπό την πλήρη κατανόηση της δομής που περιγράφηκε για τον υπολογισμό του κρατουμένου,
% σε αυτή την παράγραφο θα αναπτυχθεί ένας αθροιστής των 18 δυαδικών ψηφίων  
% \\\\\\
% \textcolor{red}{[Δημιουργία Jackson αθροιστή]}











\subsection{Αραίωση σε Jackson Αρχιτεκτονικές}
Τεχνικές αραίωσης εφαρμόζονται επίσης και στις Jackson εκφράσεις.
\label{Jackson_sparse}
Sparsness-4
\begin{equation*}
    \begin{split}
        sum_i =& x_i \oplus G_{i-1:0}\\
        =& x_i \oplus D_{i-1:k}R^{i-k}_{i-1:0}\\
        =& R^{i-k}_{i-1:0} ? x_i \oplus D_{i-1:k} : x_i\\
        sum_{i+1} =& x_{i+1} \oplus G_{i:0}\\
        =& x_{i+1} \oplus (g_i + p_i*G_{i-1:0})\\
        =& x_{i+1} \oplus (g_i + p_i*D_{i-1:k}R^{i-k}_{i-1:0})\\
        =& R^{i-k}_{i-1:0} ? x_{i+1} \oplus (g_i + p_i*D_{i-1:k}) : x_{i+1} \oplus g_i\\
        sum_{i+2} =& x_{i+2} \oplus G_{i+1:0}\\
        =& x_{i+2} \oplus (g_{i+1} + p_{i+1}g_i + p_{i+1}p_iG_{i-1:0})\\
        =& x_{i+2} \oplus (g_{i+1} + p_{i+1}g_i + p_{i+1}p_iD_{i-1:k}R^{i-k}_{i-1:0})\\
        =& R^{i-k}_{i-1:0} ? x_{i+1} \oplus (g_{i+1} + p_{i+1}g_i + p_{i+1}p_iD_{i-1:k}) \\&: x_{i+1} \oplus (g_{i+1} + p_{i+1}g_i)\\
        sum_{i+3} =& x_{i+3} \oplus G_{i+2:0}\\
        =& x_{i+3} \oplus (g_{i+2} + p_{i+2}g_{i+1} + p_{i+2}p_{i+1}g_i + p_{i+2}p_{i+1}p_iG_{i-1:0})\\
        =& x_{i+3} \oplus (g_{i+2} + p_{i+2}g_{i+1} + p_{i+2}p_{i+1}g_i + p_{i+2}p_{i+1}p_iD_{i-1:k}R^{i-k}_{i-1:0})\\
        =& R^{i-k}_{i-1:0} ? x_{i+1} \oplus (g_{i+2} + p_{i+2}g_{i+1} + p_{i+2}p_{i+1}g_i + p_{i+2}p_{i+1}p_iD_{i-1:k}) \\&: x_{i+3} \oplus (g_{i+2} + p_{i+2}g_{i+1} + p_{i+2}p_{i+1}g_i)
    \end{split} 
\end{equation*}
Sparsness-2
 \begin{equation*}
    \begin{split}
        sum_i &= x_i \oplus G_{i-1:0}\\
              &= x_i \oplus D_{i-1:k}R^{i-k}_{i-1:0}\\
              &= R^{i-k}_{i-1:0} ? x_i \oplus D_{i-1:k} : x_i\\
        sum_{i+1} &= x_{i+1} \oplus G_{i:0}\\
                  &= x_{i+1} \oplus (g_i + p_i*G_{i-1:0})\\
                  &= x_{i+1} \oplus (g_i + p_i*D_{i-1:k}R^{i-k}_{i-1:0})\\
                  &= R^{i-k}_{i-1:0} ? x_{i+1} \oplus (g_i + p_i*D_{i-1:k}) : x_{i+1} \oplus g_i
    \end{split} 
 \end{equation*}




